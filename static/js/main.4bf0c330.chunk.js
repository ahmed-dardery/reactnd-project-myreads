(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{17:function(e,t,a){e.exports=a(30)},22:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var s=a(0),o=a.n(s),n=a(15),l=a.n(n),c=a(7),r=(a(22),a(1));const i="https://reactnd-books-api.udacity.com";let h=localStorage.token;h||(h=localStorage.token=Math.random().toString(36).substr(-8));const m={Accept:"application/json",Authorization:h};var d=a(6);class k extends o.a.Component{render(){const e=this.props,t=e.onChange,a=e.shelvesList;let s=this.props.selected;s=s||"none";return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:s,onChange:e=>t(e.target.value)},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),a.map(e=>o.a.createElement("option",{key:e.shelfID,value:e.shelfID},"".concat(e.shelfID===s?"\u2714":"\u3000\u2007"," ").concat(e.shelfTitle)))))}}var b=k;var p=e=>{const t=e.shelf,a=e.onShelfChange,s=e.shelvesList,n=e.book,l=n.title,c=n.authors,r=e.book.imageLinks,i=r?r.thumbnail.replace("http://","https://"):"";return o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement(d.b,{to:{search:"?book=".concat(e.book.id)}},o.a.createElement("div",{className:"book-cover",style:{backgroundImage:"url(".concat(i,")")}})),o.a.createElement(b,{shelvesList:s,selected:t||"none",onChange:a})),o.a.createElement("div",{className:"book-title"},l),o.a.createElement("div",{className:"book-authors"},c&&c.join(", ")))};a(28);var u=()=>o.a.createElement("div",{className:"loading-icon-holder"},o.a.createElement("div",{className:"loading-icon"},o.a.createElement("svg",{viewBox:"0 0 50 50"},o.a.createElement("circle",{className:"loading-icon-circle",cx:"25",cy:"25",r:"20",fill:"none",stroke:"#60ac5d",strokeWidth:"2"}))));var g=e=>{const t=e.shelf,a=e.shelves,s=e.onBookShelfChange,n=e.shelvesList,l=e.customEmptyMessage,c=e.loading;let r=e.books||[];return r.sort((e,t)=>e.title.localeCompare(t.title)),c?o.a.createElement(u,null):o.a.createElement("ol",{className:"books-grid"},0===r.length?o.a.createElement("div",{className:"books-grid-empty"},l||"Phew, looks a bit too empty!"):r.map(e=>o.a.createElement("li",{key:e.id},o.a.createElement(p,{shelvesList:n,onShelfChange:t=>s(e,t),shelf:t||a[e.id],book:e}))))};class v extends s.Component{render(){const e=this.props,t=e.shelf,a=e.books,s=e.onBookShelfChange,n=e.shelvesList,l=e.loading;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},t.shelfTitle),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement(g,{loading:l,shelvesList:n,onBookShelfChange:s,shelf:t.shelfID,books:a.filter(e=>e.shelf===t.shelfID)})))}}var E=v;class f extends s.Component{render(){const e=this.props,t=e.books,a=e.onBookShelfChange,s=e.shelvesList,n=e.loading;return o.a.createElement("div",null,o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"My Reads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,s.map(e=>!e.system&&!e.hidden&&o.a.createElement(E,{loading:n,shelvesList:s,key:e.shelfID,onBookShelfChange:a,books:t,shelf:e})))),o.a.createElement("div",{className:"open-search"},o.a.createElement(d.b,{className:"open-search-button",to:"/search"},"Add a book"))))}}var N=f;class y extends s.Component{constructor(...e){super(...e),this.state={query:"",books:[],loading:!1},this.onChange=e=>{this.setState(()=>({query:e,loading:!0})),clearTimeout(this.queryTimeOut),this.queryTimeOut=setTimeout(()=>this.search(e.trim()),500)},this.search=e=>{e?(e=>fetch("".concat(i,"/search"),{method:"POST",headers:Object(c.a)(Object(c.a)({},m),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(e=>e.json()).then(e=>e.books))(e).then(e=>this.setState({books:e.error?[]:e,loading:!1})):this.setState({books:[],loading:!1})}}render(){const e=this.props,t=e.shelves,a=e.onBookShelfChange,s=e.shelvesList;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(d.b,{to:"/",className:"close-search"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{onChange:e=>this.onChange(e.target.value),type:"text",placeholder:"Search by title or author"}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement(g,{loading:this.state.loading,customEmptyMessage:this.state.loading||0!==this.state.query.trim().length?"No books found!":" ",shelvesList:s,shelves:t,books:this.state.books,onBookShelfChange:a})))}}var C=y;class S extends o.a.Component{constructor(...e){super(...e),this.state={book:{},loading:!0}}componentDidMount(){const e=this.props.bookID;var t;(t=e,fetch("".concat(i,"/books/").concat(t),{headers:m}).then(e=>e.json()).then(e=>e.book)).then(e=>{this.setState({book:e,loading:!1})}).catch(()=>this.props.goBack())}render(){const e=this.props.goBack,t=this.state,a=t.book,s=t.loading,n=a.imageLinks,l=n?n.thumbnail.replace("http://","https://"):"";return o.a.createElement("div",null,o.a.createElement("div",{onClick:()=>e(),className:"book-details-background"}),o.a.createElement("div",{className:"book-details-box"},s?o.a.createElement("div",{className:"book-details"},o.a.createElement(u,null)):o.a.createElement("div",{className:"book-details"},o.a.createElement("div",{className:"book-details-top"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{backgroundImage:"url(".concat(l,")")}})),o.a.createElement("div",{className:"book-details-info"},o.a.createElement("b",null,o.a.createElement("div",{className:"book-title"},a.title)),o.a.createElement("div",{className:"book-subtitle"},a.subtitle),o.a.createElement("div",{className:"book-authors"},a.authors&&a.authors.join(", ")),a.categories&&o.a.createElement("div",{className:"book-title"},"Category: ",a.categories.join(", ")),a.averageRating&&o.a.createElement("div",{className:"book-title"},"Rating: ","".concat(a.averageRating," stars - ").concat(a.ratingsCount," rating(s)")),a.pageCount&&o.a.createElement("div",{className:"book-title"},a.pageCount," Pages"))),a.description&&o.a.createElement("div",null,o.a.createElement("h2",null,"Description"),a.description,";"))))}}var L=S;class j extends o.a.Component{constructor(...e){super(...e),this.state={loading:!0,books:[],shelves:[],shelvesList:[{shelfID:"currentlyReading",shelfTitle:"Currently Reading"},{shelfID:"wantToRead",shelfTitle:"Want to Read"},{shelfID:"read",shelfTitle:"Read"},{shelfID:"none",shelfTitle:"None",system:!0}]},this.onBookShelfChange=(e,t)=>{e.shelf=t,this.setState(a=>{let s=a.books.find(t=>t.id===e.id);return s?(s.shelf=t,a):{books:[...a.books,e]}}),((e,t)=>{fetch("".concat(i,"/books/").concat(e.id),{method:"PUT",headers:Object(c.a)(Object(c.a)({},m),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(e=>e.json())})(e,t)}}componentDidMount(){fetch("".concat(i,"/books"),{headers:m}).then(e=>e.json()).then(e=>e.books).then(e=>{this.setState({books:e,loading:!1})})}render(){return o.a.createElement("div",{className:"app"},o.a.createElement(r.a,{render:({history:e,location:t})=>{const a=new URLSearchParams(t.search).get("book");return a&&o.a.createElement(L,{goBack:()=>e.push(t.pathname),bookID:a})}}),o.a.createElement(r.c,null,o.a.createElement(r.a,{exact:!0,path:"/",render:({location:e,history:t})=>o.a.createElement(N,{history:t,query:e.search,loading:this.state.loading,shelvesList:this.state.shelvesList,onBookShelfChange:this.onBookShelfChange,books:this.state.books})}),o.a.createElement(r.a,{exact:!0,path:"/search",render:()=>o.a.createElement(C,{shelvesList:this.state.shelvesList,shelves:this.state.books.reduce((e,t)=>Object(c.a)(Object(c.a)({},e),{},{[t.id]:t.shelf}),{}),onBookShelfChange:this.onBookShelfChange})}),o.a.createElement(r.a,{render:()=>o.a.createElement("div",null,"404 Page Not Found!")})))}}var B=j;a(29);l.a.render(o.a.createElement(d.a,{basename:"/reactnd-project-myreads"},o.a.createElement(B,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.4bf0c330.chunk.js.map